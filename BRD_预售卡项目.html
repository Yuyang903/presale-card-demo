<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>预售卡兑换系统商业需求文档 (BRD)</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
            background-color: #f9f9f9;
        }
        .container {
            background-color: #fff;
            padding: 50px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-radius: 8px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #eaeaea;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
        }
        h3 {
            color: #7f8c8d;
            margin-top: 25px;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        strong {
            color: #e74c3c;
        }
        p {
            margin-bottom: 15px;
            text-align: justify;
        }
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>预售卡兑换系统商业需求文档 (BRD)</h1>
        
        <h2>1. 项目背景 (Project Background)</h2>
        <p>随着市场竞争的加剧，为了拓宽销售渠道，增加商品的预售能力及礼品属性，公司计划推出“预售卡”业务。通过线下或线上发售印有唯一二维码的实物/电子卡片，用户购买或获赠后，可通过扫描二维码直接兑换指定商品。此举旨在连接线上线下场景，提升用户体验，并促进商品销售。</p>

        <h2>2. 项目目标 (Project Objectives)</h2>
        <ul>
            <li><strong>构建闭环兑换流程</strong>：实现从“发卡”到“用户扫码”再到“商品发货”的完整业务闭环。</li>
            <li><strong>提升用户体验</strong>：简化兑换流程，用户扫码即可填写地址兑换，无需复杂注册或支付流程（针对已付费卡）。</li>
            <li><strong>数据沉淀</strong>：收集持卡用户数据（如收货地域分布、兑换时间偏好），为后续营销提供数据支持。</li>
            <li><strong>安全性保障</strong>：确保每一张预售卡的唯一性和防伪性，防止恶意盗刷。</li>
        </ul>

        <h2>3. 目标用户 (Target Audience)</h2>
        <ul>
            <li><strong>卡片购买者</strong>：企业采购（员工福利、商务馈赠）、个人购买（礼品赠送）。</li>
            <li><strong>卡片持有者（兑换者）</strong>：收到预售卡并希望兑换商品的用户。</li>
            <li><strong>运营管理人员</strong>：负责制卡、激活、订单管理及物流监控的内部人员。</li>
        </ul>

        <h2>4. 业务流程概述 (Business Process Overview)</h2>
        <p>根据核心需求，业务主流程如下：</p>
        <ol>
            <li><strong>制卡与发售</strong>：
                <ul>
                    <li>系统生成唯一的卡号和二维码链接。</li>
                    <li><strong>支持多种卡类型</strong>：普通商品卡（绑定特定商品）和积分礼品卡（绑定积分面额）。</li>
                    <li>卡片印刷并分发（激活状态管理）。</li>
                </ul>
            </li>
            <li><strong>用户兑换</strong>：
                <ul>
                    <li>用户扫描卡面二维码。</li>
                    <li>系统校验二维码有效性（是否激活、是否已兑换）。</li>
                    <li><strong>根据卡类型路由</strong>：商品卡进入商品详情页；积分卡进入积分商城页。</li>
                </ul>
            </li>
            <li><strong>下单与绑定</strong>：
                <ul>
                    <li>用户填写收货人信息（姓名、电话、地址）。</li>
                    <li>提交订单，系统将卡片二维码ID与生成的实物订单进行绑定，标记卡片状态为“已使用”。</li>
                </ul>
            </li>
            <li><strong>履约发货</strong>：
                <ul>
                    <li>后台生成发货单，仓库发货。</li>
                    <li>用户可查询物流进度。</li>
                </ul>
            </li>
        </ol>

        <h2>5. 功能需求 (Functional Requirements)</h2>
        
        <h3>5.1 后台管理系统 (Admin Portal)</h3>
        <ul>
            <li><strong>卡片管理</strong>：
                <ul>
                    <li><strong>批量制卡</strong>：生成卡号、二维码数据。<strong>支持选择“商品卡”或“积分卡”类型</strong>。</li>
                    <li><strong>卡片状态管理</strong>：未激活、已激活、已兑换、已作废。</li>
                    <li><strong>商品/积分绑定</strong>：商品卡绑定特定商品；积分卡设置积分面额及关联商品池。</li>
                </ul>
            </li>
            <li><strong>订单管理</strong>：
                <ul>
                    <li><strong>兑换记录</strong>：查询卡号对应的兑换订单信息。</li>
                    <li><strong>发货管理</strong>：订单导出、物流单号回填。</li>
                </ul>
            </li>
            <li><strong>数据统计</strong>：
                <ul>
                    <li>发卡量、激活率、兑换率统计。</li>
                </ul>
            </li>
        </ul>

        <h3>5.2 用户端 (Client Side - H5/小程序)</h3>
        <ul>
            <li><strong>扫码解析</strong>：
                <ul>
                    <li>自动识别二维码参数，校验卡片状态。</li>
                    <li><strong>异常处理</strong>：若卡片未激活提示“请联系管理员”，若已兑换提示“该卡已兑换”，并展示物流信息。</li>
                </ul>
            </li>
            <li><strong>商品详情页</strong>：
                <ul>
                    <li>展示该卡可兑换的商品图片、名称、规格。</li>
                </ul>
            </li>
            <li><strong>下单页</strong>：
                <ul>
                    <li>收货地址填写（支持智能识别粘贴板地址为佳）。</li>
                    <li>提交订单按钮（防重复提交）。</li>
                </ul>
            </li>
            <li><strong>兑换成功页</strong>：
                <ul>
                    <li>展示订单号，引导关注公众号或查看物流入口。</li>
                </ul>
            </li>
        </ul>

        <h2>6. 非功能需求 (Non-functional Requirements)</h2>
        <ul>
            <li><strong>安全性</strong>：
                <ul>
                    <li>二维码URL需包含加密签名，防止暴力破解卡号。</li>
                    <li>兑换接口需加锁，防止高并发下的“一卡多兑”情况。</li>
                </ul>
            </li>
            <li><strong>性能</strong>：
                <ul>
                    <li>支持节假日等高峰期的并发扫码访问。</li>
                </ul>
            </li>
            <li><strong>易用性</strong>：
                <ul>
                    <li>兑换页面需极致简洁，无需强制用户注册账号，以手机号+验证码或微信授权为主。</li>
                </ul>
            </li>
        </ul>

        <h2>7. 风险评估 (Risk Assessment)</h2>
        <ul>
            <li><strong>卡片遗失/被盗</strong>：需制定补卡或挂失策略（如基于卡密）。</li>
            <li><strong>物流异常</strong>：用户填错地址或物流丢件，需有客服介入流程。</li>
            <li><strong>恶意刷单</strong>：防止通过接口批量试探卡号。</li>
        </ul>

        <h2>8. 后续规划 (Roadmap)</h2>
        <ul>
            <li><strong>一期</strong>：实现基础的单品兑换功能。</li>
            <li><strong>二期</strong>：支持“多选一”兑换（一张卡在多个商品中任选其一）。</li>
            <li><strong>三期</strong>：增加营销玩法，如兑换后抽奖、分享裂变等。</li>
        </ul>
    </div>
</body>
</html>